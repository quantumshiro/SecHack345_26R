---
marp: true
math: mathjax
---

# 作りたい仮想通貨

---

## 全体として作りたいもの
- 本当の意味での平等な投票制度
    - 現代は計算資源をささげることで投票を得る仕組みになっている。
    - PoWだとバリデータの選出は競争
    - PoSは資産ゲー
- 署名方式
    - 楕円曲線すきねぇ
    - post quantumにしてみない?
- 高速化したくね
    - もう十分早いが
- 51%攻撃?とかどう防ぐんだろ
- 形式検証
    - 攻撃云々につながるならやってみたい
    - Proverif?
---

## SecHack365で作りたいもの
- 署名方式
    - 今のところ実際に使われている中でpqc使ってるブロックチェーンはなさげ
    - 署名方式自体は楕円曲線を使ってる場合が多い
        - 理由はわからない
---

## BLS署名

### 概要
Boneh、Lynn、Shachamにより発明された楕円曲線上のペアリングを用いる署名は、従来の電子署名 (DSA、Schnorrなど) とくらべ、短いバイト数で署名データが表現できることが特徴となっている、比較的新しい署名技術である。
ペアリングは楕円曲線上の二つの点を引数として取り、楕円曲線上の点の加法について双線形性を持つ写像となっている

$$e(aG, bG) = e(G, G)^{ab}$$

---

### 鍵生成
1. $1 < s < p$を満たす自然数$s$をランダムに選ぶ。
2. $y = sQ$を求める
3. 秘密鍵: $s$, 公開鍵 $y$
---

### 署名
1. 暗号学的ハッシュ関数を$H: {0, 1}^* \rightarrow G$とする。
2. 署名対象$m$に対する署名$\sigma$を求める
$$
    \sigma = sH(m)
$$
---

### 検証
$$
    e(\sigma, Q) = e(H(m), y)
$$
が成り立てば署名を受理する

---

## 古典的な集約署名
集約したい署名の公開鍵、メッセージ、署名をそれぞれ
$$
    (P_i, M_i, \sigma_i), i = 1\cdots n
$$
とすると、集約された署名は、
$$
    \sigma := \sigma_1 + \sigma_2 + \sigma_3 \cdots \sigma_n
$$
であり、署名検証は
$$
    e(G, \sigma) = e(P_1, M_1) \cdots e(P_n, M_n)
$$

---

## $n$ねじれ点
体$K$上の楕円曲線$E/K$上の各点$P$について、$n$倍すると無限遠点$\mathcal{O}$になる点の集合を$n$ねじれ点といい、$E[n]$で表される。また、$n$ねじれ点を元を$n$ねじれ点といい、これらの点は全て$n^2$個存在する。
$$
    E[n] = \lbrace P \in E(\bar{K}) \mid nP = \mathcal{O} \rbrace
$$
体$K$ではなく、その代数的閉包$\bar{K}$を使うことで、全ての点が確実に位数$n$になる。また、有限体$\mathbb{F}_q$の代数的閉包$\bar{\mathbb{F}}_q$には、
$$
    \bar{\mathbb{F}}_q = \bigcup_{k>1}\mathbb{F}_{q^k}
$$

---
## Weilペアリング$e_n$
楕円曲線$E/K$について、$n$を正整数、$\mu_n$を$1$の$n$乗根からなる集合とする。また、$\mu_n$の元の位相は$n$である。体$K$(つまり$\mathbb{F}_{p^k}$)の標数$p$は$n$は割り切らないとき、次のペアリングが存在する。